## matlab编程中的函数与脚本

matlab基本工作空间随matlab启动而产生，在关闭matlab软件时该基本空间被删除。

M文件一般有函数与脚本两种格式。二者都是以m作为扩展名的文本文件，但是在语法上会稍有差别。

### 函数
- 函数文件的开头第一行是函数声明，定义了函数名、输入变量、输出变量。

- 在第一行函数声明后可以使用`%`开头为函数添加注释，这部分是函数的在线帮助，可以使用`help(函数名)`来查看。注意：在线帮助内容各行之间不能存在空行

- 在matlab命令行中可以通过函数名调用当前目录下的函数文件中的函数。

- 函数名必须与文件名相同

- 调用一个函数时函数内部的变量对于matlab基本工作空间都是不可见的，可见的只有调用函数传入的输入输出变量。这是因为函数文件在被调用时matlab会专门为其开辟一个临时工作空间，称为函数工作空间。

### 脚本
- 脚本是一个扩展名为m的文件，其中包含了MATLAB的各种命令，与批处理文件类似。

- 在matlab命令行中输入脚本文件的主文件名，matlab会一次执行文件中的所有命令，和窗口中逐行输入这些命令一样。比如执行`file.m`的命令是`file`

- 执行脚本文件时，文件中的所有变量都是全局变量，会驻留在基本工作空间里，知道用户使用clear命令清除。

- 可以使用`type file.m`显示一个脚本文件`file.m`的内容

- 假设在某个函数文件中发生对某脚本文件的调用，则这个脚本是运行在该函数的函数工作空间中的。

### 子函数
- 一个m文件中可以包含一个以上的函数，其中有一个为主函数，其余的为子函数。

- 主函数必须出现在最上方。

- 子函数只能被同一个m文件中的其他函数调用。也就是子函数是有作用域的。

- 同一个文件中的不同函数的工作空间是相互独立的，各函数之间通信通过输入输出变量、全局变量或跨空间指令传递。

### 私有目录
- 一个工作目录下，可以建立一个自己命名的私有目录来存放相关函数。

- 子目录下的函数能被其父目录的函数调用

- 当一个M文件中需要调用某一个函数时，查找顺序依次如下：
    - 检查函数是否是子函数
    - 检查函数是否为私有目录下的函数
    - 从设定的搜寻路径搜索此函数。

### P码文件
p码是伪代码Psedocode的简写，p码文件的扩展名是`.p`，这种文件是matlab环境下的一种可执行文件，由于执行它无需进行语法分析等工作，所以其执行速度优与m文件。

- 一般在首次调用一个m文件时，matlab会生成一个该m文件对应的p码文件

- 当再次调用一个m文件时，会先检查是否存在该文件的p码文件，如果存在，会直接执行该p码文件


